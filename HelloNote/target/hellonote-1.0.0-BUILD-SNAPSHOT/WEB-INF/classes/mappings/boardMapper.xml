<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  <!-- 설정! 저 사이트가 뭐냐면, ctl+space 눌렀을 때 나오는 명령어들(mapping에 필요한) 불러준다. -->
  
  <mapper namespace="BoardDAO"><!-- namespace를 여려개만들고 그 안에 자기만의 변수를 만들수 있다. 함수 처럼 변수가 겹쳐도 상관없다는거다. -->
  	<select id="getBoardList" resultType="board"> <!-- sql-map-config-spring에서 매핑해준 변수이름으로 간단하게 쓸 수 있다. -->
  			SELECT SEQ,
  				   TITLE,
  				   WRITER,
  				   CONTENT,
  				   REGDATE,
  				   CNT
  		    FROM BOARD
  		    ORDER BY SEQ DESC  	
  	</select>	
  	<delete id="deleteBoard" parameterType="board"> <!-- naming rule을 따라야한다. paramterType 안적어도된다.-->
  		DELETE BOARD
  		WHERE SEQ= ? #{seq} <!-- 자바에서 불러오는 거기 때문에 대소문자 구문한다. -->
  	
  	</delete>
  	<insert id="insertBoard"> 
  	<!-- sequence 때문에  insert하기 전에 먼저 seq를 구해야한다. SEQUENCE는 ORACLE의 기능이기 때문에 프로그램을 다른 DB로 이전까지 생각한다면 SEQUENCE를 따로 설정해주고나 만들지 말자 ! -->
  	<selectKey order="BEFORE" resultType="int" keyProperty="seq"> <!-- 이 구문이 먼저 실행되서 위에서 매핑해놓은 BoardVO객체의 int seq에 값이 미리 들어간다. -->
  		SELECT NVL(MAX(SEQ),0)+1 FROM BOARD
  	</selectKey>
  		INSERT INTO BOARD(SEQ,
  						  TITLE,
  						  WRITER,
  						  CONTENT,
  						  REGDATE,
  						  CNT) 
  				VALUES( #{seq}, <!-- 대소문자 구별 -->
  					   #{title},
  					   #{writer},
  					   #{content},
  					   sysdate,
  					   0)  						  
  	</insert>
  	<select id="getBoard" parameterType="board" resultType="board">  	
  		SELECT SEQ,
  				   TITLE,
  				   WRITER,
  				   CONTENT,
  				   REGDATE,
  				   CNT
  		    FROM BOARD
  		    WHERE SEQ = #{seq}
  		    ORDER BY SEQ DESC  	
  	</select>
  	
  	<update id="updateBoard" parameterType="board">
  		UPDATE BOARD SET
  			   TITLE = #{title}.
  			   CONTENT = #{content}
  		WHERE SEQ = #{seq}
  	</update>
  	
  	
  </mapper>